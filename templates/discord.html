{# The div for the background and global font styling.
   The actual font Discord uses is Uni Sans Heavy, but
   most people probably don't have that font installed.
   Hence we use some fallback fonts that look sort of like it.#}
<div style="
font-family: Uni Sans Heavy, Verdana, Helvetica, Arial, sans-serif;
background-color: #36393E;
min-height: 128px;
padding: 16px;
line-height: 1.375rem;
margin: -16px -12px;
">

{# Begin the list of posts. This first div ensures correct
   spacing and also ensures the avatar appears next to the 
   post body. #}
{% for post in posts %}
<div class="single-post-wrapper" 
    style="
    color: white;
    padding-bottom: 8px;
    display: flex;
    flex-direction: row;
    gap: 16px;
">

{# The profile picture for the post. The user avatar URL can 
   point to local files, but this will break when uploading to
   Cohost.#}
<div class="poster-avatar"
    style="
    background-image: url({{ post.user.avatar }});
    background-repeat: no-repeat;
    background-size: contain;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    {# no sizeplay allowed -- avoids the avatars from shrinking 
       due to very long messages.#}
    flex-shrink: 0;
"></div>

{# We use white-space: nowrap is used to ensures that the timestamp
   doesn't wrap to the next line. and we use overflow-x: hidden to
   clip the timestamp when it would go off-screen.#}
<div class="post-body"
     style="overflow-x: hidden;">
{# Post headline. This is the username + timestamp. #}
<div class="post-headline"
     style="white-space: nowrap;"
>
<span style="
    color: {{ post.user.color }};
    font-size: 100%;
">{{ post.user.name }}</span>
<span style="
    color: #A3A6AA;
    font-size: 0.75rem;
    padding-left: 10px;
">{{ post.timestamp }}</span>
</div>

{# Message contents (multiple messages are collapsed into 
   a single post body) #}
{% for message in post.messages %}

<p style="
    color: #DCDDDE;
    font-size: 1rem;
    word-wrap: break-word;
    margin-top: 4px;
    margin-bottom: 8px;
">

{{ message }}

</p>

{% endfor %}

</div>
</div>
{% endfor %}
</div>